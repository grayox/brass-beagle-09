<link rel="import" href="/bower_components/polymer/polymer.html">

<link rel="import" href="/bower_components/polymerfire/polymerfire.html">

<!-- state -->
<link rel="import" href="/src/app-state/state-user-auth.html">

<link rel="import" href="/src/app-login/login-view.html">
<link rel="import" href="/src/app-login/loggedin-view.html">

<dom-module id="app-main">
  <template>
    <style></style>
    
    <!---->
    <!-- Include firebase-app here to avoid multiple instances -->
		<firebase-app name="app"
									auth-domain="green-comet.firebaseapp.com"
									database-url="green-comet.firebaseio.com"
									api-key="AIzaSyBOqawzjd994lNbsCTb6hzDZ7wI7yFNw5o"
									>
		</firebase-app>
		<!---->

    <state-user-auth id="auth"
                     user-logged-in="{{userLoggedIn}}"
                     on-logout="logout"
                     >
    </state-user-auth>
		
		<login-view hidden$="{{userLoggedIn}}"></login-view>
		<template restamp is="dom-if" if="[[userLoggedIn]]">
		  <loggedin-view hidden$="{{!userLoggedIn}}"></loggedin-view>
		</template>

  </template>

  <script>
    class AppMain extends Polymer.Element {
      static get is() { return 'app-main'; }
				
			constructor() {
				super();
			}
			
			ready() {
        super.ready();
				//window.addEventListener('logout', (e) => this.logout(e));
        //window.addEventListener('user-action-select', (e) => this.onUserActionSelect(e));
      }

      // logout(e) {
			// 	 console.log('logout\n', e);
      //   const auth = this.$.auth;
      //   auth.signOut();
      // }

		}

    window.customElements.define(AppMain.is, AppMain);
  </script>
</dom-module>
